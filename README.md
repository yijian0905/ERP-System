# ğŸ‡²ğŸ‡¾ YiJian ERP System

é‡å°é¦¬ä¾†è¥¿äºä¸­å°ä¼æ¥­çš„ç¾ä»£åŒ– ERP ç³»çµ±ï¼Œæ•´åˆ LHDN e-Invoice (MyInvois API)ï¼Œæ”¯æ´å¤šè¡Œæ¥­ç¨…å‹™é…ç½®å’Œ SST è‡ªå‹•è¨ˆç®—ã€‚

![TypeScript](https://img.shields.io/badge/TypeScript-5.3-blue?logo=typescript)
![React](https://img.shields.io/badge/React-18.2-61DAFB?logo=react)
![Electron](https://img.shields.io/badge/Electron-Desktop-47848F?logo=electron)
![PostgreSQL](https://img.shields.io/badge/PostgreSQL-15+-4169E1?logo=postgresql)
![License](https://img.shields.io/badge/License-Proprietary-red)

---

## ğŸ“‹ ç›®éŒ„

- [ç”¢å“æ¦‚è¿°](#-ç”¢å“æ¦‚è¿°)
- [æ ¸å¿ƒåŠŸèƒ½](#-æ ¸å¿ƒåŠŸèƒ½)
- [å°ˆæ¡ˆçµæ§‹](#-å°ˆæ¡ˆçµæ§‹)
- [æŠ€è¡“æ¶æ§‹](#-æŠ€è¡“æ¶æ§‹)
- [é–‹ç™¼ç’°å¢ƒè¨­ç½®](#-é–‹ç™¼ç’°å¢ƒè¨­ç½®)
- [éƒ¨ç½²æŒ‡å—](#-éƒ¨ç½²æŒ‡å—)
- [ç›¸é—œæ–‡æª”](#-ç›¸é—œæ–‡æª”)

---

## ğŸ¯ ç”¢å“æ¦‚è¿°

### ç”¢å“å®šä½

æœ¬ç³»çµ±æ˜¯ä¸€å€‹**å®Œæ•´çš„ä¼æ¥­è³‡æºè¦åŠƒ (ERP) ç³»çµ±**ï¼Œå°ˆç‚ºé¦¬ä¾†è¥¿äºå¸‚å ´è¨­è¨ˆï¼Œæ ¸å¿ƒç‰¹è‰²ï¼š

- **e-Invoice æ•´åˆ**: å®Œå…¨ç¬¦åˆ LHDN MyInvois API è¦ç¯„
- **å¤šè¡Œæ¥­æ”¯æ´**: 15+ è¡Œæ¥­é è¨­é…ç½® (é›¶å”®ã€é¤é£²ã€å°ˆæ¥­æœå‹™ç­‰)
- **SST è‡ªå‹•åŒ–**: æ™ºèƒ½ç¨…ç‡è¨ˆç®—å¼•æ“ï¼Œæ”¯æ´ Sales Tax å’Œ Service Tax
- **æ¡Œé¢æ‡‰ç”¨äº¤ä»˜**: é€šé Electron æ‰“åŒ…ï¼Œæä¾›åŸç”Ÿæ¡Œé¢é«”é©—

### å°ˆæ¡ˆç”Ÿæ…‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         å°ˆæ¡ˆç”Ÿæ…‹ç³»çµ±                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚   ERP-System (æœ¬å°ˆæ¡ˆ)          ERP-Admin-Portal                 â”‚
â”‚   â”œâ”€â”€ apps/web                 å…§éƒ¨ç®¡ç†å¾Œå°                      â”‚
â”‚   â”œâ”€â”€ apps/api        â—„â”€â”€â”€â”€â”€â”€â”€  - ç”¨æˆ¶ç®¡ç†                      â”‚
â”‚   â”œâ”€â”€ apps/desktop             - è¨‚é–±ç®¡ç†                       â”‚
â”‚   â””â”€â”€ apps/ai-service          - æ•¸æ“šåˆ†æ                       â”‚
â”‚                                                                 â”‚
â”‚   ERP-Official-Website                                          â”‚
â”‚   ç”¢å“å®˜ç¶²                                                       â”‚
â”‚   - ç”¢å“ä»‹ç´¹                                                     â”‚
â”‚   - è¨»å†Šå¼•å°                                                     â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

### æ¨™æº– ERP æ¨¡çµ„

| æ¨¡çµ„ | èªªæ˜ |
|------|------|
| **ç”¢å“ç®¡ç†** | SKUã€åˆ†é¡ã€å®šåƒ¹ã€åº«å­˜è¿½è¹¤ |
| **å®¢æˆ¶ç®¡ç†** | å®¢æˆ¶è³‡æ–™ã€ä¿¡ç”¨é¡åº¦ã€äº¤æ˜“æ­·å² |
| **ä¾›æ‡‰å•†ç®¡ç†** | ä¾›æ‡‰å•†è³‡æ–™ã€æ¡è³¼åƒ¹æ ¼ã€äº¤è²¨æœŸ |
| **è¨‚å–®ç®¡ç†** | éŠ·å”®è¨‚å–®ã€æ¡è³¼è¨‚å–®ã€è¨‚å–®å±¥è¡Œ |
| **ç™¼ç¥¨ç®¡ç†** | ç™¼ç¥¨å»ºç«‹ã€åˆ—å°ã€ä»˜æ¬¾è¿½è¹¤ |
| **å€‰åº«ç®¡ç†** | å¤šå€‰åº«ã€åº«å­˜èª¿æ’¥ã€æ‰¹è™Ÿè¿½è¹¤ |
| **å ±è¡¨åˆ†æ** | éŠ·å”®å ±è¡¨ã€åº«å­˜å ±è¡¨ã€è²¡å‹™æ‘˜è¦ |

### e-Invoice æ•´åˆ (LHDN MyInvois)

| åŠŸèƒ½ | èªªæ˜ |
|------|------|
| **åˆ†é¡ä»£ç¢¼** | å®Œæ•´ 45 å€‹ LHDN åˆ†é¡ä»£ç¢¼æ”¯æ´ |
| **MSIC ä»£ç¢¼** | é¦¬ä¾†è¥¿äºæ¨™æº–å·¥æ¥­åˆ†é¡ä»£ç¢¼ |
| **ç¨…ç‡å¼•æ“** | è‡ªå‹•åˆ¤æ–· SST é©ç”¨ç¨…ç‡ |
| **API æäº¤** | ç›´æ¥æäº¤è‡³ MyInvois API |
| **QR é©—è­‰** | é©—è­‰å¾Œè‡ªå‹•ç”Ÿæˆ QR Code |

### AI åŠŸèƒ½ (å¯é¸)

| åŠŸèƒ½ | èªªæ˜ |
|------|------|
| **éœ€æ±‚é æ¸¬** | åŸºæ–¼æ­·å²æ•¸æ“šçš„æ™ºèƒ½é æ¸¬ |
| **åº«å­˜å„ªåŒ–** | è‡ªå‹•å†è¨‚è³¼é»å»ºè­° |
| **AI åŠ©æ‰‹** | è‡ªç„¶èªè¨€æŸ¥è©¢ (Enterprise) |

---

## ğŸ“ å°ˆæ¡ˆçµæ§‹

```
erp-system/
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ web/                 # React å‰ç«¯ (Vite)
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ components/  # UI çµ„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ routes/      # TanStack Router é é¢
â”‚   â”‚   â”‚   â”œâ”€â”€ stores/      # Zustand ç‹€æ…‹ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ lib/         # å·¥å…·å‡½æ•¸å’Œ API å®¢æˆ¶ç«¯
â”‚   â”‚   â”‚   â””â”€â”€ mocks/       # MSW Mock æ•¸æ“š
â”‚   â”‚   â””â”€â”€ package.json
â”‚   â”‚
â”‚   â”œâ”€â”€ api/                 # Fastify å¾Œç«¯
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ routes/      # API è·¯ç”±
â”‚   â”‚   â”‚   â”œâ”€â”€ middleware/  # èªè­‰ã€æˆæ¬Šä¸­é–“ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ lib/         # å·¥å…·å‡½æ•¸
â”‚   â”‚   â””â”€â”€ package.json
â”‚   â”‚
â”‚   â”œâ”€â”€ desktop/             # Electron æ¡Œé¢æ‡‰ç”¨
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ main/        # ä¸»é€²ç¨‹
â”‚   â”‚   â”‚   â””â”€â”€ preload/     # é è¼‰è…³æœ¬
â”‚   â”‚   â””â”€â”€ package.json
â”‚   â”‚
â”‚   â””â”€â”€ ai-service/          # Python AI æœå‹™
â”‚       â”œâ”€â”€ app/
â”‚       â””â”€â”€ requirements.txt
â”‚
â”œâ”€â”€ packages/
â”‚   â”œâ”€â”€ database/            # Prisma ORM
â”‚   â”œâ”€â”€ shared-types/        # å…±äº« TypeScript é¡å‹
â”‚   â”œâ”€â”€ config/              # å…±äº«é…ç½®
â”‚   â””â”€â”€ logger/              # æ—¥èªŒæ¨¡çµ„
â”‚
â”œâ”€â”€ docs/                    # æ–‡æª”
â”‚   â””â”€â”€ cloudflare-tunnel-setup.md
â”‚
â””â”€â”€ è¦åŠƒæ–‡æª”/
    â”œâ”€â”€ 00-INDEX.md          # æ–‡æª”ç´¢å¼•
    â”œâ”€â”€ 01-INDUSTRY-CONFIG.md # è¡Œæ¥­é…ç½®
    â”œâ”€â”€ 02-TAX-RATES.md      # ç¨…ç‡è¦ç¯„
    â”œâ”€â”€ 03-CLASSIFICATION.md # åˆ†é¡ä»£ç¢¼
    â”œâ”€â”€ 04-MSIC-CODES.md     # MSIC ä»£ç¢¼
    â”œâ”€â”€ 05-TAX-ENGINE.md     # ç¨…ç‡å¼•æ“
    â””â”€â”€ 06-INVOICE-PRINT-TEMPLATE.md # ç™¼ç¥¨æ¨¡æ¿
```

---

## ğŸ› ï¸ æŠ€è¡“æ¶æ§‹

### å‰ç«¯
| æŠ€è¡“ | ç”¨é€” |
|------|------|
| React 18 | UI æ¡†æ¶ |
| TypeScript | é¡å‹å®‰å…¨ |
| Vite | å»ºæ§‹å·¥å…· |
| TanStack Router | è·¯ç”± |
| TanStack Query | æœå‹™ç«¯ç‹€æ…‹ |
| Zustand | å®¢æˆ¶ç«¯ç‹€æ…‹ |
| Tailwind CSS | æ¨£å¼ |
| shadcn/ui | UI çµ„ä»¶åº« |
| Framer Motion | å‹•ç•« |

### å¾Œç«¯
| æŠ€è¡“ | ç”¨é€” |
|------|------|
| Node.js 20+ | é‹è¡Œç’°å¢ƒ |
| Fastify | Web æ¡†æ¶ |
| Prisma | ORM |
| PostgreSQL | æ•¸æ“šåº« |
| Redis | ç·©å­˜å’Œæœƒè©± |
| Zod | é©—è­‰ |

### æ¡Œé¢æ‡‰ç”¨
| æŠ€è¡“ | ç”¨é€” |
|------|------|
| Electron | æ¡Œé¢é‹è¡Œæ™‚ |
| electron-builder | æ‰“åŒ… |
| contextBridge | å®‰å…¨ IPC |

---

## ğŸš€ é–‹ç™¼ç’°å¢ƒè¨­ç½®

### å‰ç½®éœ€æ±‚

| è»Ÿé«” | ç‰ˆæœ¬ |
|------|------|
| Node.js | â‰¥ 20.0.0 |
| pnpm | â‰¥ 9.0.0 |
| Docker | Latest |
| Git | Latest |

### å¿«é€Ÿé–‹å§‹

```bash
# 1. å…‹éš†å°ˆæ¡ˆ
git clone <repository-url>
cd erp-system

# 2. å®‰è£ä¾è³´
pnpm install

# 3. å•Ÿå‹•åŸºç¤æœå‹™ (PostgreSQL, Redis)
docker-compose up -d postgres redis

# 4. é…ç½®ç’°å¢ƒè®Šé‡
cp apps/api/.env.example apps/api/.env
cp apps/web/.env.example apps/web/.env

# 5. åˆå§‹åŒ–æ•¸æ“šåº«
pnpm db:generate
pnpm db:push
pnpm db:seed

# 6. å•Ÿå‹•é–‹ç™¼æœå‹™å™¨
pnpm dev
```

é–‹ç™¼æœå‹™å™¨ï¼š
- **å‰ç«¯**: http://localhost:5173
- **å¾Œç«¯ API**: http://localhost:3000

### æ¡Œé¢æ‡‰ç”¨é–‹ç™¼

```bash
# é–‹ç™¼æ¨¡å¼
pnpm desktop:dev

# æ‰“åŒ…
pnpm desktop:build
pnpm desktop:package:win
```

---

## ğŸ­ éƒ¨ç½²æŒ‡å—

### å¾Œç«¯éƒ¨ç½² (NAS)

å¾Œç«¯ API éƒ¨ç½²åœ¨ Synology NAS ä¸Šï¼š

1. **é–‹ç™¼éšæ®µ**: ä½¿ç”¨ Tailscale VPN é€£æ¥
2. **ç”Ÿç”¢éšæ®µ**: ä½¿ç”¨ Cloudflare Tunnel

è©³ç´°è¨­ç½®è«‹åƒè€ƒ: [Cloudflare Tunnel è¨­ç½®æŒ‡å—](docs/cloudflare-tunnel-setup.md)

### æ¡Œé¢æ‡‰ç”¨åˆ†ç™¼

```bash
# ç”Ÿç”¢å»ºæ§‹
pnpm desktop:build:production

# æ‰“åŒ…ç‚ºå®‰è£ç¨‹å¼
pnpm desktop:package:win   # Windows
pnpm desktop:package:mac   # macOS
pnpm desktop:package:linux # Linux
```

---

## ğŸ“š ç›¸é—œæ–‡æª”

### è¦åŠƒæ–‡æª”

| æ–‡æª” | èªªæ˜ |
|------|------|
| [00-INDEX.md](00-INDEX.md) | æ–‡æª”ç´¢å¼•å’Œæ¶æ§‹ç¸½è¦½ |
| [01-INDUSTRY-CONFIG.md](01-INDUSTRY-CONFIG.md) | å•†æ¥­é ˜åŸŸé…ç½® |
| [02-TAX-RATES.md](02-TAX-RATES.md) | SST ç¨…ç‡è¦ç¯„ |
| [03-CLASSIFICATION.md](03-CLASSIFICATION.md) | LHDN åˆ†é¡ä»£ç¢¼ |
| [04-MSIC-CODES.md](04-MSIC-CODES.md) | MSIC ä»£ç¢¼ |
| [05-TAX-ENGINE.md](05-TAX-ENGINE.md) | ç¨…ç‡è‡ªå‹•åŒ–å¼•æ“ |
| [06-INVOICE-PRINT-TEMPLATE.md](06-INVOICE-PRINT-TEMPLATE.md) | ç™¼ç¥¨åˆ—å°æ¨¡æ¿ |

### æŠ€è¡“æ–‡æª”

| æ–‡æª” | èªªæ˜ |
|------|------|
| [E-Invoice.md](E-Invoice.md) | MyInvois API æ•´åˆè¦ç¯„ |
| [DEPLOYMENT_GUIDE.md](DEPLOYMENT_GUIDE.md) | éƒ¨ç½²æŒ‡å— |
| [docs/cloudflare-tunnel-setup.md](docs/cloudflare-tunnel-setup.md) | Cloudflare Tunnel è¨­ç½® |

---

## ğŸ“œ é–‹ç™¼è¦ç¯„

æœ¬å°ˆæ¡ˆéµå¾ªä»¥ä¸‹é–‹ç™¼è¦ç¯„ï¼Œè©³è¦‹ `.agent/rules/`:

- **rules.md**: Desktop-First é–‹ç™¼æµç¨‹ã€API æ•´åˆè¦ç¯„
- **security.md**: ä¼æ¥­å®‰å…¨æ¨™æº–
- **frontend-design.md**: Modern Clean SaaS è¨­è¨ˆè¦ç¯„

---

## ğŸ“„ æˆæ¬Š

Proprietary - ç‰ˆæ¬Šæ‰€æœ‰

---

*æœ€å¾Œæ›´æ–°: 2025-12-27*